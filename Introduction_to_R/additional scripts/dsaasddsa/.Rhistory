dat$age <- NULL
dat$detailed.occupation <- NULL
dat$conservative <- NULL
dat <- subset (dat, select = -c(Q1r1:Q1r13))
dat$Q2 <- NULL
dat <- subset (dat, select = -c(Q4:Q5))
dat$Q10 <- NULL
dat$wght1 <- NULL
dat$wght2 <- NULL
dat <- dat[-c(1), ] # delete row with survey questions from dataset. For more details on the questions, see codebook in the data folder.
dat$pop.density <- recode(dat$pop.density, "A city/metropolis" = 'City', "A rural area"  = 'Rural', "A small or medium-sized town" = 'Medium')
# change character values to categorical
dat <- as.data.frame(unclass(dat),         # Convert all columns to factor
stringsAsFactors = TRUE)
############################
##  Prepare climate score ##
############################
# store the prepared data for later analysis
factor_dat <- dat
# change data to numeric
dat[sapply(dat, is.factor)] <- data.matrix(dat[sapply(dat, is.factor)])
# clean data:
# political affiliation: do not wish to reply -> turn to Nas, ensure that order is correct
dat$left.right[dat$left.right == 11] <- NA
dat$left.right[dat$left.right == 2] <- 12
dat$left.right <- dat$left.right - 1
dat$left.right[dat$left.right == 11] <- 10
dat$left.right[dat$left.right == 0] <- 1
# exclude questions that are not relevant for the personal climate score
dat$Q6 <- NULL
dat$Q7 <- NULL
dat <- subset (dat, select = -c(Q9r1:Q9r4))
dat$Q13 <- NULL
dat <- subset (dat, select = -c(Q16r1:Q16r2))
dat$Q19 <- NULL
# in Q11, the scale is wrong
# this is certainly not the most elegant way to reorder the score rating, but it works
dat$Q11[dat$Q11 == 4] <- 5
dat$Q11[dat$Q11 == 3] <- 4
dat$Q11[dat$Q11 == 5] <- 3
# in Q12, the scale is wrong
dat$Q12[dat$Q12 == 4] <- 5
dat$Q12[dat$Q12 == 3] <- 4
dat$Q12[dat$Q12 == 5] <- 3
# in Q 14 the scale is wrong
dat$Q14r1[dat$Q14r1 == 4] <- 5
dat$Q14r1[dat$Q14r1 == 3] <- 4
dat$Q14r1[dat$Q14r1 == 5] <- 3
dat$Q14r2[dat$Q14r2 == 4] <- 5
dat$Q14r2[dat$Q14r2 == 3] <- 4
dat$Q14r2[dat$Q14r2 == 5] <- 3
dat$Q14r3[dat$Q14r3 == 4] <- 5
dat$Q14r3[dat$Q14r3 == 3] <- 4
dat$Q14r3[dat$Q14r3 == 5] <- 3
dat$Q14r4[dat$Q14r4 == 4] <- 5
dat$Q14r4[dat$Q14r4 == 3] <- 4
dat$Q14r4[dat$Q14r4 == 5] <- 3
dat$Q14r5[dat$Q14r5 == 4] <- 5
dat$Q14r5[dat$Q14r5 == 3] <- 4
dat$Q14r5[dat$Q14r5 == 5] <- 3
# reverse Q18
dat$Q18 <- 5 - dat$Q18
climate_score <- dat %>%
select(c(Q3:Q18)) %>%
rowSums()
dat$climate_score <- climate_score
factor_dat$climate_score <- climate_score
dat$Q6 <- factor_dat$Q6
# # see if any participant did not answer question 6
table(is.na(dat$Q6))
cdeniers <- dat[dat$Q6 == 'There is no climate crisis, it is a hoax'|dat$Q6 =='Because global warming is not due to human activities, so our actions won’t make a difference', ]
c_ordered <- factor_dat[order(factor_dat$climate_score),]
lowc <- c_ordered[1:175, ]
highc <- c_ordered[6825:6999,]
highc <- subset (highc, select = -c(Q3:Q19))
lowc <- subset (lowc, select = -c(Q3:Q19))
highc$detailed.occupation <- NULL
lowc$detailed.occupation <- NULL
highc$cc <- as.factor("high c")
lowc$cc <- as.factor("low c")
cc <- rbind(lowc, highc)
cc$left.right[cc$left.right == "10 - Very right-wing"] <- 10
cc$id <- 1:nrow(cc)
library(dplyr)
library(readxl)
library(tidyverse)
library(ggpubr)
# change working directory
# setwd('data')
# setwd("C:/Users/janak/OneDrive/Year 4.1/Questionnaire design/Lecture slides/template report structured/template report structured/data")
## load data
dat <- read_excel("eib-climate-survey-2021-2022-bdd-all-countries-results-pr1-2.xlsx")
########################
### Data preparation  ##
########################
# select only a couple of countries of interest: For the final report, I might include more/all countries
dat <- dplyr::filter(dat, grepl('Germany|Sweden|France|Finland|Portugal', country))
# rename column headers
colnames(dat)[colnames(dat) %in% c("sd2", "sd8", "sd1", "sd3", "sd6b", "sd7", "Q25")] <- c("age", "children 18 yo", "gender", "detailed occupation", "left-right", "conservative", "pop.density")
#remove unnecessary columns
dat$record <- NULL # participant number
dat$uuid <- NULL # participant id
dat$language <- NULL # language of questionnaire
dat$mpq <- NULL
dat$mpq2 <- NULL
dat$sd6 <- NULL
dat <- subset (dat, select = -c(qc1:agerecode))
dat <- subset (dat, select = -c(sd4at:sd5cn))
dat$age <- NULL
dat$detailed.occupation <- NULL
dat$conservative <- NULL
dat <- subset (dat, select = -c(Q1r1:Q1r13))
dat$Q2 <- NULL
dat <- subset (dat, select = -c(Q4:Q5))
dat$Q10 <- NULL
dat$wght1 <- NULL
dat$wght2 <- NULL
dat <- dat[-c(1), ] # delete row with survey questions from dataset. For more details on the questions, see codebook in the data folder.
dat$pop.density <- recode(dat$pop.density, "A city/metropolis" = 'City', "A rural area"  = 'Rural', "A small or medium-sized town" = 'Medium')
# change character values to categorical
dat <- as.data.frame(unclass(dat),         # Convert all columns to factor
stringsAsFactors = TRUE)
############################
##  Prepare climate score ##
############################
# store the prepared data for later analysis
factor_dat <- dat
# change data to numeric
dat[sapply(dat, is.factor)] <- data.matrix(dat[sapply(dat, is.factor)])
# clean data:
# political affiliation: do not wish to reply -> turn to Nas, ensure that order is correct
dat$left.right[dat$left.right == 11] <- NA
dat$left.right[dat$left.right == 2] <- 12
dat$left.right <- dat$left.right - 1
dat$left.right[dat$left.right == 11] <- 10
dat$left.right[dat$left.right == 0] <- 1
# exclude questions that are not relevant for the personal climate score
dat$Q6 <- NULL
dat$Q7 <- NULL
dat <- subset (dat, select = -c(Q9r1:Q9r4))
dat$Q13 <- NULL
dat <- subset (dat, select = -c(Q16r1:Q16r2))
dat$Q19 <- NULL
# in Q11, the scale is wrong
# this is certainly not the most elegant way to reorder the score rating, but it works
dat$Q11[dat$Q11 == 4] <- 5
dat$Q11[dat$Q11 == 3] <- 4
dat$Q11[dat$Q11 == 5] <- 3
# in Q12, the scale is wrong
dat$Q12[dat$Q12 == 4] <- 5
dat$Q12[dat$Q12 == 3] <- 4
dat$Q12[dat$Q12 == 5] <- 3
# in Q 14 the scale is wrong
dat$Q14r1[dat$Q14r1 == 4] <- 5
dat$Q14r1[dat$Q14r1 == 3] <- 4
dat$Q14r1[dat$Q14r1 == 5] <- 3
dat$Q14r2[dat$Q14r2 == 4] <- 5
dat$Q14r2[dat$Q14r2 == 3] <- 4
dat$Q14r2[dat$Q14r2 == 5] <- 3
dat$Q14r3[dat$Q14r3 == 4] <- 5
dat$Q14r3[dat$Q14r3 == 3] <- 4
dat$Q14r3[dat$Q14r3 == 5] <- 3
dat$Q14r4[dat$Q14r4 == 4] <- 5
dat$Q14r4[dat$Q14r4 == 3] <- 4
dat$Q14r4[dat$Q14r4 == 5] <- 3
dat$Q14r5[dat$Q14r5 == 4] <- 5
dat$Q14r5[dat$Q14r5 == 3] <- 4
dat$Q14r5[dat$Q14r5 == 5] <- 3
# reverse Q18
dat$Q18 <- 5 - dat$Q18
climate_score <- dat %>%
select(c(Q3:Q18)) %>%
rowSums()
dat$climate_score <- climate_score
factor_dat$climate_score <- climate_score
dat$Q6 <- factor_dat$Q6
# # see if any participant did not answer question 6
table(is.na(dat$Q6))
cdeniers <- dat[dat$Q6 == 'There is no climate crisis, it is a hoax'|dat$Q6 =='Because global warming is not due to human activities, so our actions won’t make a difference', ]
c_ordered <- factor_dat[order(factor_dat$climate_score),]
lowc <- c_ordered[1:175, ]
highc <- c_ordered[6825:6999,]
highc <- subset (highc, select = -c(Q3:Q19))
lowc <- subset (lowc, select = -c(Q3:Q19))
highc$detailed.occupation <- NULL
lowc$detailed.occupation <- NULL
highc$cc <- as.factor("high c")
lowc$cc <- as.factor("low c")
cc <- rbind(lowc, highc)
cc$id <- 1:nrow(cc)
table(cc)
stop
table(cc$left.right)
cc$left.right[cc$left.right == "10 - Very right-wing"] <- "10"
## load data
dat <- read_excel("eib-climate-survey-2021-2022-bdd-all-countries-results-pr1-2.xlsx")
########################
### Data preparation  ##
########################
# select only a couple of countries of interest: For the final report, I might include more/all countries
dat <- dplyr::filter(dat, grepl('Germany|Sweden|France|Finland|Portugal', country))
# rename column headers
colnames(dat)[colnames(dat) %in% c("sd2", "sd8", "sd1", "sd3", "sd6b", "sd7", "Q25")] <- c("age", "children 18 yo", "gender", "detailed occupation", "left-right", "conservative", "pop.density")
#remove unnecessary columns
dat$record <- NULL # participant number
dat$uuid <- NULL # participant id
dat$language <- NULL # language of questionnaire
dat$mpq <- NULL
dat$mpq2 <- NULL
dat$sd6 <- NULL
dat <- subset (dat, select = -c(qc1:agerecode))
dat <- subset (dat, select = -c(sd4at:sd5cn))
dat$age <- NULL
dat$detailed.occupation <- NULL
dat$conservative <- NULL
dat <- subset (dat, select = -c(Q1r1:Q1r13))
dat$Q2 <- NULL
dat <- subset (dat, select = -c(Q4:Q5))
dat$Q10 <- NULL
dat$wght1 <- NULL
dat$wght2 <- NULL
dat <- dat[-c(1), ] # delete row with survey questions from dataset. For more details on the questions, see codebook in the data folder.
dat$pop.density <- recode(dat$pop.density, "A city/metropolis" = 'City', "A rural area"  = 'Rural', "A small or medium-sized town" = 'Medium')
# change character values to categorical
dat <- as.data.frame(unclass(dat),         # Convert all columns to factor
stringsAsFactors = TRUE)
############################
##  Prepare climate score ##
############################
# store the prepared data for later analysis
factor_dat <- dat
# change data to numeric
dat[sapply(dat, is.factor)] <- data.matrix(dat[sapply(dat, is.factor)])
# clean data:
# political affiliation: do not wish to reply -> turn to Nas, ensure that order is correct
dat$left.right[dat$left.right == 11] <- NA
dat$left.right[dat$left.right == 2] <- 12
dat$left.right <- dat$left.right - 1
dat$left.right[dat$left.right == 11] <- 10
dat$left.right[dat$left.right == 0] <- 1
# exclude questions that are not relevant for the personal climate score
dat$Q6 <- NULL
dat$Q7 <- NULL
dat <- subset (dat, select = -c(Q9r1:Q9r4))
dat$Q13 <- NULL
dat <- subset (dat, select = -c(Q16r1:Q16r2))
dat$Q19 <- NULL
# in Q11, the scale is wrong
# this is certainly not the most elegant way to reorder the score rating, but it works
dat$Q11[dat$Q11 == 4] <- 5
dat$Q11[dat$Q11 == 3] <- 4
dat$Q11[dat$Q11 == 5] <- 3
# in Q12, the scale is wrong
dat$Q12[dat$Q12 == 4] <- 5
dat$Q12[dat$Q12 == 3] <- 4
dat$Q12[dat$Q12 == 5] <- 3
# in Q 14 the scale is wrong
dat$Q14r1[dat$Q14r1 == 4] <- 5
dat$Q14r1[dat$Q14r1 == 3] <- 4
dat$Q14r1[dat$Q14r1 == 5] <- 3
dat$Q14r2[dat$Q14r2 == 4] <- 5
dat$Q14r2[dat$Q14r2 == 3] <- 4
dat$Q14r2[dat$Q14r2 == 5] <- 3
dat$Q14r3[dat$Q14r3 == 4] <- 5
dat$Q14r3[dat$Q14r3 == 3] <- 4
dat$Q14r3[dat$Q14r3 == 5] <- 3
dat$Q14r4[dat$Q14r4 == 4] <- 5
dat$Q14r4[dat$Q14r4 == 3] <- 4
dat$Q14r4[dat$Q14r4 == 5] <- 3
dat$Q14r5[dat$Q14r5 == 4] <- 5
dat$Q14r5[dat$Q14r5 == 3] <- 4
dat$Q14r5[dat$Q14r5 == 5] <- 3
# reverse Q18
dat$Q18 <- 5 - dat$Q18
climate_score <- dat %>%
select(c(Q3:Q18)) %>%
rowSums()
dat$climate_score <- climate_score
factor_dat$climate_score <- climate_score
dat$Q6 <- factor_dat$Q6
# # see if any participant did not answer question 6
table(is.na(dat$Q6))
cdeniers <- dat[dat$Q6 == 'There is no climate crisis, it is a hoax'|dat$Q6 =='Because global warming is not due to human activities, so our actions won’t make a difference', ]
c_ordered <- factor_dat[order(factor_dat$climate_score),]
lowc <- c_ordered[1:175, ]
highc <- c_ordered[6825:6999,]
highc <- subset (highc, select = -c(Q3:Q19))
lowc <- subset (lowc, select = -c(Q3:Q19))
highc$detailed.occupation <- NULL
lowc$detailed.occupation <- NULL
highc$cc <- as.factor("high c")
lowc$cc <- as.factor("low c")
cc <- rbind(lowc, highc)
cc$id <- 1:nrow(cc)
[cc$left.right == "10 - Very right-wing"] <- "10"
cc[cc$left.right == "10 - Very right-wing"] <- "10"
cc[cc$left.right == "10 - Very right-wing",] <- "10"
cc$left.right[cc$left.right == "10 - Very right-wing",] <- "10"
cc$left.right <- as.factor(cc$left.right)
load data
dat <- read_excel("eib-climate-survey-2021-2022-bdd-all-countries-results-pr1-2.xlsx")
########################
### Data preparation  ##
########################
# select only a couple of countries of interest: For the final report, I might include more/all countries
dat <- dplyr::filter(dat, grepl('Germany|Sweden|France|Finland|Portugal', country))
# rename column headers
colnames(dat)[colnames(dat) %in% c("sd2", "sd8", "sd1", "sd3", "sd6b", "sd7", "Q25")] <- c("age", "children 18 yo", "gender", "detailed occupation", "left-right", "conservative", "pop.density")
#remove unnecessary columns
dat$record <- NULL # participant number
dat$uuid <- NULL # participant id
dat$language <- NULL # language of questionnaire
dat$mpq <- NULL
dat$mpq2 <- NULL
dat$sd6 <- NULL
dat <- subset (dat, select = -c(qc1:agerecode))
dat <- subset (dat, select = -c(sd4at:sd5cn))
dat$age <- NULL
dat$detailed.occupation <- NULL
dat$conservative <- NULL
dat <- subset (dat, select = -c(Q1r1:Q1r13))
dat$Q2 <- NULL
dat <- subset (dat, select = -c(Q4:Q5))
dat$Q10 <- NULL
dat$wght1 <- NULL
dat$wght2 <- NULL
dat <- dat[-c(1), ] # delete row with survey questions from dataset. For more details on the questions, see codebook in the data folder.
dat$pop.density <- recode(dat$pop.density, "A city/metropolis" = 'City', "A rural area"  = 'Rural', "A small or medium-sized town" = 'Medium')
# change character values to categorical
dat <- as.data.frame(unclass(dat),         # Convert all columns to factor
stringsAsFactors = TRUE)
############################
##  Prepare climate score ##
############################
# store the prepared data for later analysis
factor_dat <- dat
# change data to numeric
dat[sapply(dat, is.factor)] <- data.matrix(dat[sapply(dat, is.factor)])
# clean data:
# political affiliation: do not wish to reply -> turn to Nas, ensure that order is correct
dat$left.right[dat$left.right == 11] <- NA
dat$left.right[dat$left.right == 2] <- 12
dat$left.right <- dat$left.right - 1
dat$left.right[dat$left.right == 11] <- 10
dat$left.right[dat$left.right == 0] <- 1
# exclude questions that are not relevant for the personal climate score
dat$Q6 <- NULL
dat$Q7 <- NULL
dat <- subset (dat, select = -c(Q9r1:Q9r4))
dat$Q13 <- NULL
dat <- subset (dat, select = -c(Q16r1:Q16r2))
dat$Q19 <- NULL
# in Q11, the scale is wrong
# this is certainly not the most elegant way to reorder the score rating, but it works
dat$Q11[dat$Q11 == 4] <- 5
dat$Q11[dat$Q11 == 3] <- 4
dat$Q11[dat$Q11 == 5] <- 3
# in Q12, the scale is wrong
dat$Q12[dat$Q12 == 4] <- 5
dat$Q12[dat$Q12 == 3] <- 4
dat$Q12[dat$Q12 == 5] <- 3
# in Q 14 the scale is wrong
dat$Q14r1[dat$Q14r1 == 4] <- 5
dat$Q14r1[dat$Q14r1 == 3] <- 4
dat$Q14r1[dat$Q14r1 == 5] <- 3
dat$Q14r2[dat$Q14r2 == 4] <- 5
dat$Q14r2[dat$Q14r2 == 3] <- 4
dat$Q14r2[dat$Q14r2 == 5] <- 3
dat$Q14r3[dat$Q14r3 == 4] <- 5
dat$Q14r3[dat$Q14r3 == 3] <- 4
dat$Q14r3[dat$Q14r3 == 5] <- 3
dat$Q14r4[dat$Q14r4 == 4] <- 5
dat$Q14r4[dat$Q14r4 == 3] <- 4
dat$Q14r4[dat$Q14r4 == 5] <- 3
dat$Q14r5[dat$Q14r5 == 4] <- 5
dat$Q14r5[dat$Q14r5 == 3] <- 4
dat$Q14r5[dat$Q14r5 == 5] <- 3
# reverse Q18
dat$Q18 <- 5 - dat$Q18
climate_score <- dat %>%
select(c(Q3:Q18)) %>%
rowSums()
dat$climate_score <- climate_score
factor_dat$climate_score <- climate_score
dat$Q6 <- factor_dat$Q6
# # see if any participant did not answer question 6
table(is.na(dat$Q6))
cdeniers <- dat[dat$Q6 == 'There is no climate crisis, it is a hoax'|dat$Q6 =='Because global warming is not due to human activities, so our actions won’t make a difference', ]
c_ordered <- factor_dat[order(factor_dat$climate_score),]
lowc <- c_ordered[1:175, ]
highc <- c_ordered[6825:6999,]
highc <- subset (highc, select = -c(Q3:Q19))
lowc <- subset (lowc, select = -c(Q3:Q19))
highc$detailed.occupation <- NULL
lowc$detailed.occupation <- NULL
highc$cc <- as.factor("high c")
lowc$cc <- as.factor("low c")
cc <- rbind(lowc, highc)
cc$id <- 1:nrow(cc)
cc$left.right <- as.factor(cc$left.right)
table(cc%ledt)
table(cc$left.right)
cc$left.right <- ordered(cc$left.right, levels = c("1 - Very left-wing 10", "2", "3", "4", "5", "6", "7", "9", "10 - Very right-wing", "Do not wish to reply"))
f <- ggplot(cc, aes(fill=left.right, x=cc, y=id)) +
geom_bar(position='fill', stat='identity')
f
# setwd("C:/Users/janak/OneDrive/Year 4.1/Questionnaire design/Lecture slides/template report structured/template report structured/data")
## load data
dat <- read_excel("eib-climate-survey-2021-2022-bdd-all-countries-results-pr1-2.xlsx")
########################
### Data preparation  ##
########################
# select only a couple of countries of interest: For the final report, I might include more/all countries
dat <- dplyr::filter(dat, grepl('Germany|Sweden|France|Finland|Portugal', country))
# rename column headers
colnames(dat)[colnames(dat) %in% c("sd2", "sd8", "sd1", "sd3", "sd6b", "sd7", "Q25")] <- c("age", "children 18 yo", "gender", "detailed occupation", "left-right", "conservative", "pop.density")
#remove unnecessary columns
dat$record <- NULL # participant number
dat$uuid <- NULL # participant id
dat$language <- NULL # language of questionnaire
dat$mpq <- NULL
dat$mpq2 <- NULL
dat$sd6 <- NULL
dat <- subset (dat, select = -c(qc1:agerecode))
dat <- subset (dat, select = -c(sd4at:sd5cn))
dat$age <- NULL
dat$detailed.occupation <- NULL
dat$conservative <- NULL
dat <- subset (dat, select = -c(Q1r1:Q1r13))
dat$Q2 <- NULL
dat <- subset (dat, select = -c(Q4:Q5))
dat$Q10 <- NULL
dat$wght1 <- NULL
dat$wght2 <- NULL
dat <- dat[-c(1), ] # delete row with survey questions from dataset. For more details on the questions, see codebook in the data folder.
dat$pop.density <- recode(dat$pop.density, "A city/metropolis" = 'City', "A rural area"  = 'Rural', "A small or medium-sized town" = 'Medium')
# change character values to categorical
dat <- as.data.frame(unclass(dat),         # Convert all columns to factor
stringsAsFactors = TRUE)
############################
##  Prepare climate score ##
############################
# store the prepared data for later analysis
factor_dat <- dat
# change data to numeric
dat[sapply(dat, is.factor)] <- data.matrix(dat[sapply(dat, is.factor)])
# clean data:
# political affiliation: do not wish to reply -> turn to Nas, ensure that order is correct
dat$left.right[dat$left.right == 11] <- NA
dat$left.right[dat$left.right == 2] <- 12
dat$left.right <- dat$left.right - 1
dat$left.right[dat$left.right == 11] <- 10
dat$left.right[dat$left.right == 0] <- 1
# exclude questions that are not relevant for the personal climate score
dat$Q6 <- NULL
dat$Q7 <- NULL
dat <- subset (dat, select = -c(Q9r1:Q9r4))
dat$Q13 <- NULL
dat <- subset (dat, select = -c(Q16r1:Q16r2))
dat$Q19 <- NULL
# in Q11, the scale is wrong
# this is certainly not the most elegant way to reorder the score rating, but it works
dat$Q11[dat$Q11 == 4] <- 5
dat$Q11[dat$Q11 == 3] <- 4
dat$Q11[dat$Q11 == 5] <- 3
# in Q12, the scale is wrong
dat$Q12[dat$Q12 == 4] <- 5
dat$Q12[dat$Q12 == 3] <- 4
dat$Q12[dat$Q12 == 5] <- 3
# in Q 14 the scale is wrong
dat$Q14r1[dat$Q14r1 == 4] <- 5
dat$Q14r1[dat$Q14r1 == 3] <- 4
dat$Q14r1[dat$Q14r1 == 5] <- 3
dat$Q14r2[dat$Q14r2 == 4] <- 5
dat$Q14r2[dat$Q14r2 == 3] <- 4
dat$Q14r2[dat$Q14r2 == 5] <- 3
dat$Q14r3[dat$Q14r3 == 4] <- 5
dat$Q14r3[dat$Q14r3 == 3] <- 4
dat$Q14r3[dat$Q14r3 == 5] <- 3
dat$Q14r4[dat$Q14r4 == 4] <- 5
dat$Q14r4[dat$Q14r4 == 3] <- 4
dat$Q14r4[dat$Q14r4 == 5] <- 3
dat$Q14r5[dat$Q14r5 == 4] <- 5
dat$Q14r5[dat$Q14r5 == 3] <- 4
dat$Q14r5[dat$Q14r5 == 5] <- 3
# reverse Q18
dat$Q18 <- 5 - dat$Q18
climate_score <- dat %>%
select(c(Q3:Q18)) %>%
rowSums()
dat$climate_score <- climate_score
factor_dat$climate_score <- climate_score
dat$Q6 <- factor_dat$Q6
# # see if any participant did not answer question 6
table(is.na(dat$Q6))
cdeniers <- dat[dat$Q6 == 'There is no climate crisis, it is a hoax'|dat$Q6 =='Because global warming is not due to human activities, so our actions won’t make a difference', ]
c_ordered <- factor_dat[order(factor_dat$climate_score),]
lowc <- c_ordered[1:175, ]
highc <- c_ordered[6825:6999,]
highc <- subset (highc, select = -c(Q3:Q19))
lowc <- subset (lowc, select = -c(Q3:Q19))
highc$detailed.occupation <- NULL
lowc$detailed.occupation <- NULL
highc$cc <- as.factor("high c")
lowc$cc <- as.factor("low c")
cc <- rbind(lowc, highc)
cc$id <- 1:nrow(cc)
cc$left.right <- as.factor(cc$left.right)
cc$left.right <- ordered(cc$left.right, levels = c("1 - Very left-wing", "2", "3", "4", "5", "6", "7", "9", "10 - Very right-wing", "Do not wish to reply"))
f <- ggplot(cc, aes(fill=left.right, x=cc, y=id)) +
geom_bar(position='fill', stat='identity')
f
